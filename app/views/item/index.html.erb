<h1>Products</h1>

<details>
    <summary>Cart</summary>
    <% if @session_cart.empty? %>
        <p>Cart is empty</p>
    <% else %>
        <ul>
            <% @cart.each do |item| %>
                <li><%= item.name %><%= button_to 'remove from cart', remove_from_cart_path(item.id), method: :delete %></li>
            <% end %>
        </ul>
    <% end %>
</details>

<%= form_tag(search_path, :method => "get") do %>
    <div class="input-group">
        <%= search_field_tag :search, params[:search], placeholder: 'Type ', class: 'form-control' %>
        <% item_type_list = ItemType.all.map { |type| [type.name, type.id] } %>
        <%= select_tag(:type, options_for_select(item_type_list, selected: params[:type]),include_blank: true)%>
        <div class="input-group-btn">
            <%= button_tag "Search", :name => nil %>
        </div>
    </div>
<% end %>

<% @items.each do |item| %>
    <ul>
        <%= link_to item.name, item %>
        <%= image_tag item.image %>
        <% if @session_cart.include?(item) %>
            <p><%= item.item_type.name %> is in your shopping cart</p>
            <p><%= button_to 'remove from cart', remove_from_cart_path(item.id), method: :delete %></p>
        <% end %>
    </ul>
<% end %>

<%= paginate @items %>